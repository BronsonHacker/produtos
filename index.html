<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Top 100 Produtos Mais Vendidos</title>
    
    <!-- Tailwind CSS para estilização rápida e responsiva -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter, usado por empresas de tecnologia -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117; /* Tom de cinza mais escuro, similar ao GitHub Dark */
            color: #c9d1d9; /* Cor de texto suave */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .product-card {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
            background-color: #161b22; /* Fundo do card */
            border: 1px solid #30363d; /* Borda do card */
        }

        .product-card.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Efeito de brilho no hover */
        .product-card:hover .shine-effect {
            opacity: 1;
            transform: scale(1.5) rotate(20deg);
        }

        .shine-effect {
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0) 70%);
            transform: scale(0);
            transition: opacity 0.6s ease, transform 0.6s ease;
            opacity: 0;
            pointer-events: none;
            z-index: 1;
        }
    </style>
</head>
<body class="bg-gray-900 text-white">

    <header class="py-8 px-4 sm:px-6 lg:px-8 border-b border-gray-800">
        <div class="max-w-7xl mx-auto text-center">
            <h1 class="text-4xl sm:text-5xl font-extrabold tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-gray-200 to-gray-500">Top 100 Ofertas</h1>
            <p class="mt-4 text-lg text-gray-400 max-w-2xl mx-auto">Uma seleção dos produtos mais desejados, escolhidos a dedo para você na nossa região.</p>
        </div>
    </header>

    <main class="py-12 sm:py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
                <!-- Os cards de produtos serão inseridos aqui -->
            </div>
            <div id="loading-message" class="text-center text-gray-400 text-lg mt-8">Carregando produtos...</div>
        </div>
    </main>

    <footer class="py-8 mt-12 border-t border-gray-800">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-gray-500">
            <p>&copy; 2024 Sua Marca Aqui. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const productGrid = document.getElementById('product-grid');
            const loadingMessage = document.getElementById('loading-message');

            async function loadProducts() {
                try {
                    const response = await fetch('products.json');
                    if (!response.ok) {
                        throw new Error(`Erro HTTP! status: ${response.status}`);
                    }
                    const products = await response.json();
                    loadingMessage.style.display = 'none';
                    displayProducts(products);
                } catch (error) {
                    console.error("Erro ao carregar o arquivo de produtos:", error);
                    loadingMessage.textContent = 'Falha ao carregar a lista de produtos. Verifique se o arquivo "products.json" está acessível e no formato correto.';
                }
            }

            function createStarRating(rating) {
                const safeRating = parseFloat(rating) || 0;
                const fullStars = Math.floor(safeRating);
                const halfStar = safeRating % 1 >= 0.5;
                let starsHTML = '';
                
                for (let i = 0; i < fullStars; i++) {
                    starsHTML += `<svg class="w-4 h-4 text-amber-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>`;
                }
                if (halfStar && fullStars < 5) {
                    starsHTML += `<svg class="w-4 h-4 text-amber-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292zM10 12.433V6.253l.816 2.508a1 1 0 00.95.69h2.766l-2.238 1.626a1 1 0 00-.364 1.118l.816 2.508L10 12.433z"/></svg>`;
                }
                const emptyStars = 5 - Math.ceil(safeRating);
                for (let i = 0; i < emptyStars; i++) {
                    starsHTML += `<svg class="w-4 h-4 text-gray-500" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>`;
                }
                
                return `<div class="flex items-center">${starsHTML}</div>`;
            }

            function displayProducts(products) {
                 if (!productGrid || !Array.isArray(products)) return;
                productGrid.innerHTML = ''; 

                products.forEach((product, index) => {
                    const card = document.createElement('div');
                    card.className = 'product-card rounded-lg overflow-hidden shadow-lg transform hover:-translate-y-1 hover:shadow-cyan-500/10 transition-all duration-300 ease-in-out flex flex-col';
                    
                    const discount = Math.round(((parseFloat(product.originalPrice) - parseFloat(product.price)) / parseFloat(product.originalPrice)) * 100);
                    
                    card.innerHTML = `
                        <div class="relative overflow-hidden group">
                            <div class="shine-effect"></div>
                            <img class="w-full h-48 object-cover" src="${product.imageUrl}" alt="${product.name}" loading="lazy" onerror="this.onerror=null;this.src='https://placehold.co/400x400/161b22/c9d1d9?text=Imagem+Indispon%C3%ADvel';">
                            <div class="absolute top-2 left-2 bg-gray-900/60 text-white text-xs font-bold w-8 h-8 flex items-center justify-center rounded-full backdrop-blur-sm border border-gray-700">${index + 1}</div>
                            ${discount > 0 ? `<div class="absolute top-2 right-2 bg-red-600 text-white text-xs font-bold px-2 py-1 rounded-full shadow-lg">${discount}% OFF</div>` : ''}
                        </div>
                        <div class="p-4 flex-grow flex flex-col">
                            <div class="flex-grow" style="min-height: 80px;">
                                <h3 class="text-sm font-semibold text-gray-200">${product.name}</h3>
                            </div>
                            
                            <div class="mt-auto pt-2">
                                <div class="mb-2">
                                    <span class="text-2xl font-bold text-white">R$${product.price}</span>
                                    ${product.originalPrice && parseFloat(product.originalPrice) > parseFloat(product.price) ? `<span class="ml-2 text-sm text-gray-500 line-through">R$${product.originalPrice}</span>` : ''}
                                </div>
                                
                                <div class="flex items-center space-x-2 text-xs text-gray-400 mb-4 h-5">
                                    ${createStarRating(product.rating)}
                                    <span>(${product.reviews} reviews)</span>
                                </div>

                                <a href="${product.affiliateLink}" target="_blank" rel="noopener noreferrer" class="block w-full bg-blue-600 text-white text-center font-semibold py-2 rounded-md hover:bg-blue-500 transition-colors duration-300 text-sm">
                                    Ver Oferta
                                </a>
                            </div>
                        </div>
                    `;
                    productGrid.appendChild(card);
                });

                setupIntersectionObserver();
            }

            function setupIntersectionObserver() {
                const cards = document.querySelectorAll('.product-card');
                if (cards.length === 0) return;

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('is-visible');
                            observer.unobserve(entry.target);
                        }
                    });
                }, { threshold: 0.1 });

                cards.forEach(card => observer.observe(card));
            }

            loadProducts();
        });
    </script>

</body>
</html>
